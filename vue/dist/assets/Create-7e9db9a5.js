import{a2 as d,ab as R,o as i,f as V,x as s,a3 as n,V as y,h as u,t as g,E as k,e as v,F as N,l as B,q as t,ad as D,i as _,n as E,a7 as f,ai as M,af as P,a9 as F,w as T,aa as z,v as A,a5 as G,y as L}from"./main-f152cda1.js";import{u as $}from"./Users-cc1a61fb.js";import{V as j}from"./VForm-4a2215f2.js";import{a as x,V as m}from"./VRow-13768b54.js";const I=["value"],H={key:1,class:"d-block"},J={class:"relative m-auto p-2"},K=["src"],O=u("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"},null,-1),Q=u("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),W=u("g",{id:"SVGRepo_iconCarrier"},[u("path",{fill:"#29CCFF",d:"M21 3H3C1.35 3 0 4.35 0 6v12c0 1.55 1.19 2.83 2.7 2.98.1.01.2.02.3.02h18c.1 0 .2 0 .29-.02.03 0 .06-.01.09-.01C22.86 20.78 24 19.52 24 18V6c0-1.65-1.35-3-3-3zm1 13.53l-2.21-4.42c-.25-.5-.69-.87-1.22-1.03-.19-.05-.38-.08-.57-.08-.35 0-.7.09-1.01.27l-6.41 3.74-2.46-1.67C7.78 13.11 7.39 13 7 13c-.52 0-1.03.2-1.41.59L2 17.18V6c0-.55.45-1 1-1h18c.55 0 1 .45 1 1v10.53z"}),u("circle",{fill:"#29CCFF",cx:"11",cy:"10",r:"2"})],-1),X=[O,Q,W],te={__name:"Create",setup(Y){const o=$(),b=d(""),S=d(""),w=d(null),C=()=>{w.value.click()},r=d({name:"",title:"",email:"",image:"",role:null,password:""}),U=e=>{const l=e.target.files[0],a=new FileReader;a.readAsDataURL(l),a.onload=p=>{b.value=p.target.result,S.value=l,r.value.image=l}},h=d(!1),c=d({name:[e=>e?!0:"Name is required",e=>(e==null?void 0:e.length)>=4?!0:"Name must be less than 4 charcters"],title:[e=>e?!0:"title is required"],email:[e=>e?!0:"E-mail is requred.",e=>/.+@.+\..+/.test(e)?!0:"E-mail must be valid."],password:[e=>e?!0:"Password is required",e=>(e==null?void 0:e.length)>=4?!0:"Password must be less than 6 charcters"]}),q=async e=>{const l=new FormData;l.append("name",e.name),l.append("title",e.title),l.append("email",e.email),l.append("image",e.image),l.append("role",e.role),l.append("password",e.password),console.log(l.get("image")),L.post("/api/users/create",l).then(a=>{console.log(a)}).catch(a=>{console.log(a)})};return R(async()=>{o.fetchRoles()}),(e,l)=>(i(),V(G,{class:"mx-auto pa-12 pb-8",elevation:"8"},{default:s(()=>[n(o).successMsg?(i(),V(y,{key:0,class:"custom-alert-class",type:"success",variant:"tonal",border:"start",elevation:"2",closable:"","close-label":e.$t("close")},{default:s(()=>[u("small",null,g(n(o).successMsg),1)]),_:1},8,["close-label"])):k("",!0),n(o).errors.length!==0?(i(),V(y,{key:1,class:"custom-alert-class",type:"error",variant:"tonal",border:"start",elevation:"2",closable:"","close-label":e.$t("close")},{default:s(()=>[typeof n(o).errors=="object"?(i(!0),v(N,{key:0},B(n(o).errors,(a,p)=>(i(),v("small",{class:"d-block",value:p,key:p},g(a),9,I))),128)):(i(),v("small",H,g(n(o).errors),1))]),_:1},8,["close-label"])):k("",!0),t(D,{class:"mb-2"},{default:s(()=>[_(" Create User ")]),_:1}),t(j,{modelValue:h.value,"onUpdate:modelValue":l[5]||(l[5]=a=>h.value=a),onSubmit:l[6]||(l[6]=E(a=>q(r.value),["prevent"]))},{default:s(()=>[t(x,null,{default:s(()=>[t(m,{cols:"12",md:"4"},{default:s(()=>[t(f,{modelValue:r.value.name,"onUpdate:modelValue":l[0]||(l[0]=a=>r.value.name=a),rules:c.value.name,counter:4,label:"Name",variant:"solo",required:""},null,8,["modelValue","rules"])]),_:1}),t(m,{cols:"12",md:"4"},{default:s(()=>[t(f,{modelValue:r.value.title,"onUpdate:modelValue":l[1]||(l[1]=a=>r.value.title=a),rules:c.value.title,label:"Title",variant:"solo",required:""},null,8,["modelValue","rules"])]),_:1}),t(m,{cols:"12",md:"4"},{default:s(()=>[t(M,{modelValue:r.value.role,"onUpdate:modelValue":l[2]||(l[2]=a=>r.value.role=a),items:n(o).roles,label:"Role",variant:"solo","item-title":a=>a.name,"item-value":a=>a.id,"item-disabled":!1},null,8,["modelValue","items","item-title","item-value"])]),_:1})]),_:1}),t(x,null,{default:s(()=>[t(m,{cols:"12",md:"4"},{default:s(()=>[t(f,{modelValue:r.value.email,"onUpdate:modelValue":l[3]||(l[3]=a=>r.value.email=a),rules:c.value.email,label:"E-mail",variant:"solo",required:""},null,8,["modelValue","rules"])]),_:1}),t(m,{cols:"12",md:"4"},{default:s(()=>[t(f,{modelValue:r.value.password,"onUpdate:modelValue":l[4]||(l[4]=a=>r.value.password=a),rules:c.value.password,counter:6,label:"Password",variant:"solo",required:""},null,8,["modelValue","rules"])]),_:1}),t(m,{cols:"12",md:"4"},{default:s(()=>[u("div",J,[u("input",{type:"file",ref_key:"fileInput",ref:w,name:"image",id:"image",hidden:"",onChange:U},null,544),u("img",{onClick:C,src:b.value,width:"200",class:"uploaded-image relative m-auto cursor-pointer rounded"},null,8,K),(i(),v("svg",{onClick:C,class:"cursor-pointer absolute left-[50%] m-auto bottom-0 bg-white rounded-full p-1 h-8 w-8",viewBox:"-2.4 -2.4 28.80 28.80",xmlns:"http://www.w3.org/2000/svg",fill:"#29CCFF",transform:"matrix(-1, 0, 0, 1, 0, 0)"},X))])]),_:1})]),_:1}),t(P,null,{default:s(()=>[t(F,{color:"error",variant:"elevated"},{default:s(()=>[_("Cancel")]),_:1}),t(F,{type:"submit",color:"success",variant:"elevated"},{default:s(()=>[T(t(z,{indeterminate:"",color:"white",class:"mx-3",size:"25"},null,512),[[A,n(o).loading]]),_(" Save ")]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{te as default};
