import{r as i,q as g,o as n,e as m,w as s,d as o,j as w,t as d,g as V,c,F as N,f as S,b as a,k as f,h,i as B,B as x,l as b,m as F,n as M,v as U}from"./main-7054a6f8.js";import{u as q}from"./Users-4d9dc09d.js";import{V as _}from"./VAlert-6db46ae6.js";import{b as P,c as R,V as T}from"./VCard-a2c8332f.js";import{V as $}from"./VForm-b6133dc8.js";import{a as j,V as y}from"./VRow-374ca1a4.js";const A=["value"],D={key:1,class:"d-block"},K={__name:"Create",setup(z){const l=q(),u=i({name:"",permissions:[]}),p=i(!1),k=i({name:[t=>t?!0:"Name is required",t=>(t==null?void 0:t.length)>=4?!0:"Name must be less than 4 charcters"]}),C=async t=>{await l.addRole(t)};return g(async()=>{l.fetchPermissions()}),(t,r)=>(n(),m(T,{class:"mx-auto pa-12 pb-8",elevation:"8"},{default:s(()=>[o(l).successMsg?(n(),m(_,{key:0,class:"custom-alert-class",type:"success",variant:"tonal",border:"start",elevation:"2",closable:"","close-label":t.$t("close")},{default:s(()=>[w("small",null,d(o(l).successMsg),1)]),_:1},8,["close-label"])):V("",!0),o(l).errors.length!==0?(n(),m(_,{key:1,class:"custom-alert-class",type:"error",variant:"tonal",border:"start",elevation:"2",closable:"","close-label":t.$t("close")},{default:s(()=>[typeof o(l).errors=="object"?(n(!0),c(N,{key:0},S(o(l).errors,(e,v)=>(n(),c("small",{class:"d-block",value:v,key:v},d(e),9,A))),128)):(n(),c("small",D,d(o(l).errors),1))]),_:1},8,["close-label"])):V("",!0),a(P,{class:"mb-2"},{default:s(()=>[f(" Create Role ")]),_:1}),a($,{modelValue:p.value,"onUpdate:modelValue":r[2]||(r[2]=e=>p.value=e),onSubmit:r[3]||(r[3]=h(e=>C(u.value),["prevent"]))},{default:s(()=>[a(j,null,{default:s(()=>[a(y,{cols:"12",md:"4"},{default:s(()=>[a(B,{modelValue:u.value.name,"onUpdate:modelValue":r[0]||(r[0]=e=>u.value.name=e),rules:k.value.name,counter:4,label:"Name",variant:"solo",required:""},null,8,["modelValue","rules"])]),_:1}),a(y,{cols:"12",md:"4"},{default:s(()=>[a(x,{modelValue:u.value.permissions,"onUpdate:modelValue":r[1]||(r[1]=e=>u.value.permissions=e),items:o(l).permissions,label:"Permissions",variant:"solo","item-title":e=>e.name,"item-value":e=>e.id,"item-disabled":!1,multiple:""},null,8,["modelValue","items","item-title","item-value"])]),_:1})]),_:1}),a(R,null,{default:s(()=>[a(b,{color:"error",variant:"elevated"},{default:s(()=>[f("Cancel")]),_:1}),a(b,{type:"submit",color:"success",variant:"elevated"},{default:s(()=>[F(a(M,{indeterminate:"",color:"white",class:"mx-3",size:"25"},null,512),[[U,o(l).loading]]),f(" Save ")]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{K as default};
