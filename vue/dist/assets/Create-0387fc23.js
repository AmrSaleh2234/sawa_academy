import{_ as c,o as i,c as r,b as s,w as o,j as p,t as f,F as d,f as q,e as u,i as V,l as _,D as h,a as C,g as k,h as $,x as N,k as x}from"./main-7054a6f8.js";import{V as g,a as I,b as Q,c as E,d as F}from"./VExpansionPanel-b06f9204.js";import{V as P}from"./VAlert-6db46ae6.js";import{V as w}from"./VForm-b6133dc8.js";import{V as B}from"./VSheet-80e1c927.js";const T={name:"question",props:["header"],emits:["question-inputs"],data:()=>({NameRules:[e=>e?!0:" Field is required."],headers:[],questionsNumbers:[1,2],questionCounter:2,questionInputs:[],color:"success",icon:"mdi-plus"}),methods:{addQuestion(){this.questionCounter<3?(this.questionsNumbers.push(++this.questionCounter),this.color="red",this.icon="mdi-minus"):(--this.questionCounter,this.questionsNumbers.splice(-1),this.questionInputs.splice(-1,1),this.color="success",this.icon="mdi-plus")},returnparent(){this.$emit("question-inputs",this.header.id,this.questionInputs)}},mounted(){}},R={class:"pa-4 header-question"},U={class:"d-flex justify-end"};function S(e,t,l,b,v,n){return i(),r(d,null,[s(g,{"expand-icon":"mdi-plus","collapse-icon":"mdi-minus"},{default:o(()=>[p("div",R,f(l.header.title),1)]),_:1}),s(I,null,{default:o(()=>[(i(!0),r(d,null,q(e.questionsNumbers,(m,a)=>(i(),u(V,{rules:e.NameRules,label:e.$t("question"),modelValue:e.questionInputs[a],"onUpdate:modelValue":y=>e.questionInputs[a]=y,onKeyup:n.returnparent,"aria-required":"true"},null,8,["rules","label","modelValue","onUpdate:modelValue","onKeyup"]))),256)),p("div",U,[s(_,{class:"btn-question",icon:e.icon,color:e.color,onClick:n.addQuestion},null,8,["icon","color","onClick"])])]),_:1})],64)}const j=c(T,[["render",S],["__scopeId","data-v-b223202d"]]),D={data:()=>({NameRules:[e=>e?!0:"This field is required"],isFormValid:!1,evaluation:{title:"",side_profile_id:"",six_month:!0,questions:[]},alert_text:null,type:"success",snackbar:!0,selected:[],headers:[],questions:[],sideProfile:[]}),components:{questionComponent:j},methods:{async submit(){const{valid:e}=await this.$refs.form.validate();e&&(this.evaluation.questions=[],this.questions.forEach((t,l)=>{this.evaluation.questions.push({headerId:l,questions:t})}),this.evaluation.side_profile_id=this.$route.params.sideProfile_id,h.post("/api/evaluations/create",this.evaluation).then(t=>{t.data.status==200&&(this.evaluation={},this.evaluation.six_month=!0,this.alert_text="evaluation added successfully ",this.type="success")}).catch(t=>{this.alert_text=t.response.data.message,this.type="error"}))},getQuestionHeaders(){h.get("/api/evaluationheaders").then(e=>{this.headers=e.data.headers,console.log(this.headers)})},addQuestion(e,t){this.questions[e]=t,console.log(this.questions)}},mounted(){this.getQuestionHeaders()}};function H(e,t,l,b,v,n){const m=C("questionComponent");return i(),u(B,{"max-width":"1200",class:"mx-auto"},{default:o(()=>[e.alert_text!=null?(i(),u(P,{key:0,type:e.type,variant:"tonal",border:"start",elevation:"2",closable:"","close-label":e.$t("close"),text:e.alert_text,class:"mb-8"},null,8,["type","close-label","text"])):k("",!0),s(w,{"fast-fail":"",onSubmit:t[2]||(t[2]=$(()=>{},["prevent"])),ref:"form"},{default:o(()=>[s(V,{modelValue:e.evaluation.title,"onUpdate:modelValue":t[0]||(t[0]=a=>e.evaluation.title=a),label:e.$t("evaluation_title"),rules:e.NameRules},null,8,["modelValue","label","rules"]),s(Q,{modelValue:e.evaluation.six_month,"onUpdate:modelValue":t[1]||(t[1]=a=>e.evaluation.six_month=a),label:e.$t("evaluation_exception")},null,8,["modelValue","label"]),s(N,{fluid:""},{default:o(()=>[s(E,null,{default:o(()=>[(i(!0),r(d,null,q(e.headers,a=>(i(),u(F,{key:a.id},{default:o(()=>[s(m,{header:a,onQuestionInputs:n.addQuestion},null,8,["header","onQuestionInputs"])]),_:2},1024))),128))]),_:1})]),_:1}),s(_,{type:"submit",onClick:n.submit,block:"",class:"mt-2"},{default:o(()=>[x(f(e.$t("submit")),1)]),_:1},8,["onClick"])]),_:1},512)]),_:1})}const G=c(D,[["render",H]]);export{G as default};
