import{z as R,r as u,E as B,q as N,o as i,e as m,w as l,d as n,j as S,t as d,g as b,c,F as h,f as E,b as t,k as p,h as $,i as x,B as F,l as _,m as M,n as T,v as U}from"./main-7054a6f8.js";import{u as q}from"./Users-4d9dc09d.js";import{V as y}from"./VAlert-6db46ae6.js";import{b as P,c as j,V as z}from"./VCard-a2c8332f.js";import{V as A}from"./VForm-b6133dc8.js";import{a as D,V as g}from"./VRow-374ca1a4.js";const I=["value"],L={key:1,class:"d-block"},X={__name:"Edit",setup(G){const v=R(),a=q(),r=u({role_id:null,name:"",permissions:[]}),f=u(!1),k=u({name:[e=>e?!0:"Name is required",e=>(e==null?void 0:e.length)>=4?!0:"Name must be less than 4 charcters"]}),w=async e=>{await a.updateRole(e)},{getRoleById:C}=B(a);return N(async()=>{await a.fetchPermissions(),await a.fetchRoles();const e=C.value(v.params.id);r.value.role_id=v.params.id,r.value.name=e.name,r.value.permissions=e.permissions}),(e,o)=>(i(),m(z,{class:"mx-auto pa-12 pb-8",elevation:"8"},{default:l(()=>[n(a).successMsg?(i(),m(y,{key:0,class:"custom-alert-class",type:"success",variant:"tonal",border:"start",elevation:"2",closable:"","close-label":e.$t("close")},{default:l(()=>[S("small",null,d(n(a).successMsg),1)]),_:1},8,["close-label"])):b("",!0),n(a).errors.length!==0?(i(),m(y,{key:1,class:"custom-alert-class",type:"error",variant:"tonal",border:"start",elevation:"2",closable:"","close-label":e.$t("close")},{default:l(()=>[typeof n(a).errors=="object"?(i(!0),c(h,{key:0},E(n(a).errors,(s,V)=>(i(),c("small",{class:"d-block",value:V,key:V},d(s),9,I))),128)):(i(),c("small",L,d(n(a).errors),1))]),_:1},8,["close-label"])):b("",!0),t(P,{class:"mb-2"},{default:l(()=>[p(" Edit Role ")]),_:1}),t(A,{modelValue:f.value,"onUpdate:modelValue":o[3]||(o[3]=s=>f.value=s),onSubmit:o[4]||(o[4]=$(s=>w(r.value),["prevent"]))},{default:l(()=>[t(D,null,{default:l(()=>[t(g,{cols:"12",md:"4"},{default:l(()=>[t(x,{modelValue:r.value.name,"onUpdate:modelValue":o[0]||(o[0]=s=>r.value.name=s),rules:k.value.name,counter:4,label:"Name",variant:"solo",required:""},null,8,["modelValue","rules"])]),_:1}),t(g,{cols:"12",md:"4"},{default:l(()=>[t(F,{modelValue:r.value.permissions,"onUpdate:modelValue":o[1]||(o[1]=s=>r.value.permissions=s),items:n(a).permissions,label:"Permissions",variant:"solo","item-title":s=>s.name,"item-value":s=>s.id,"item-disabled":!1,multiple:""},null,8,["modelValue","items","item-title","item-value"])]),_:1})]),_:1}),t(j,null,{default:l(()=>[t(_,{color:"error",variant:"elevated",onClick:o[2]||(o[2]=s=>e.$router.go(-1))},{default:l(()=>[p("Cancel")]),_:1}),t(_,{type:"submit",color:"success",variant:"elevated"},{default:l(()=>[M(t(T,{indeterminate:"",color:"white",class:"mx-3",size:"25"},null,512),[[U,n(a).loading]]),p(" Save ")]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{X as default};
