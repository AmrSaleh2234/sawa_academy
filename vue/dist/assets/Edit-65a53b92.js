import{J as B,R as N,s as i,G as S,o as n,d as m,w as s,x as u,B as y,a as R,t as d,C as k,c,F as x,k as $,h as a,f as v,l as q,D as g,P as F,i as w,j as M,E as T,v as h}from"./main-5f3cd431.js";import{u as D}from"./Users-62bd706f.js";import{b as j,c as A,V as P}from"./VCard-d342c4fd.js";import{V as z}from"./VForm-85293703.js";import{a as C,V as f}from"./VRow-689a3d9c.js";const G=["value"],I={key:1,class:"d-block"},W={__name:"Edit",setup(J){const V=B(),t=D(),{getUserById:U}=N(t),o=i({user_id:null,name:"",email:"",role:null}),p=i(!1),b=i({name:[e=>e?!0:"Name is required",e=>(e==null?void 0:e.length)>=4?!0:"Name must be less than 4 charcters"],email:[e=>e?!0:"E-mail is requred.",e=>/.+@.+\..+/.test(e)?!0:"E-mail must be valid."]}),E=async e=>{await t.updateUser(e)};return S(async()=>{await t.fetchRoles(),await t.fetchUsers();const e=U.value(V.params.id);o.value.user_id=V.params.id,o.value.name=e.name,o.value.email=e.email,o.value.role=e.roles[0]}),(e,r)=>(n(),m(P,{class:"mx-auto pa-12 pb-8",elevation:"8"},{default:s(()=>[u(t).successMsg?(n(),m(y,{key:0,class:"custom-alert-class",type:"success",variant:"tonal",border:"start",elevation:"2",closable:"","close-label":e.$t("close")},{default:s(()=>[R("small",null,d(u(t).successMsg),1)]),_:1},8,["close-label"])):k("",!0),u(t).errors.length!==0?(n(),m(y,{key:1,class:"custom-alert-class",type:"error",variant:"tonal",border:"start",elevation:"2",closable:"","close-label":e.$t("close")},{default:s(()=>[typeof u(t).errors=="object"?(n(!0),c(x,{key:0},$(u(t).errors,(l,_)=>(n(),c("small",{class:"d-block",value:_,key:_},d(l),9,G))),128)):(n(),c("small",I,d(u(t).errors),1))]),_:1},8,["close-label"])):k("",!0),a(j,{class:"mb-2"},{default:s(()=>[v(" Edit User ")]),_:1}),a(z,{modelValue:p.value,"onUpdate:modelValue":r[4]||(r[4]=l=>p.value=l),onSubmit:r[5]||(r[5]=q(l=>E(o.value),["prevent"]))},{default:s(()=>[a(C,null,{default:s(()=>[a(f,{cols:"12",md:"4"},{default:s(()=>[a(g,{modelValue:o.value.name,"onUpdate:modelValue":r[0]||(r[0]=l=>o.value.name=l),rules:b.value.name,counter:4,label:"Name",variant:"solo",required:""},null,8,["modelValue","rules"])]),_:1}),a(f,{cols:"12",md:"4"},{default:s(()=>[a(F,{modelValue:o.value.role,"onUpdate:modelValue":r[1]||(r[1]=l=>o.value.role=l),items:u(t).roles,label:"Role",variant:"solo","item-title":l=>l.name,"item-value":l=>l.id,"item-disabled":!1},null,8,["modelValue","items","item-title","item-value"])]),_:1})]),_:1}),a(C,null,{default:s(()=>[a(f,{cols:"12",md:"4"},{default:s(()=>[a(g,{modelValue:o.value.email,"onUpdate:modelValue":r[2]||(r[2]=l=>o.value.email=l),rules:b.value.email,label:"E-mail",variant:"solo",required:""},null,8,["modelValue","rules"])]),_:1})]),_:1}),a(A,null,{default:s(()=>[a(w,{color:"error",variant:"elevated",onClick:r[3]||(r[3]=l=>e.$router.go(-1))},{default:s(()=>[v("Cancel")]),_:1}),a(w,{type:"submit",color:"success",variant:"elevated"},{default:s(()=>[M(a(T,{indeterminate:"",color:"white",class:"mx-3",size:"25"},null,512),[[h,u(t).loading]]),v(" Save ")]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{W as default};
